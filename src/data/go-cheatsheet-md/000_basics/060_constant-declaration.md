---
title: "定数宣言 `const`: 変わらない値を定義する"
tags: ["basics", "定数", "const"]
---

プログラムの中には、円周率 (π) のように、値が最初から決まっていて、プログラムの実行中に変わることがない（または変わってはいけない）値があります。このような値を扱うために使われるのが**定数**です。

Go言語では `const` キーワードを使って定数を宣言します。

## `const` を使った定数宣言

```go title="定数宣言の基本"
package main

import "fmt"

// const キーワードを使って定数を宣言
// 構文: const 定数名 [型] = 値
const Pi float64 = 3.14159 // 円周率 Pi を float64 型の定数として宣言
const AppName = "MyApp"     // 型を省略。右辺の "MyApp" から string 型と推論される
const MaxUsers = 1000       // 型を省略。右辺の 1000 から int 型と推論される
const Enabled = true        // 型を省略。右辺の true から bool 型と推論される

// const は関数外 (パッケージレベル) でも関数内でも宣言可能
func main() {
	const LocalConst = "これはローカル定数" // 関数内での定数宣言

	fmt.Println("円周率:", Pi)
	fmt.Println("アプリ名:", AppName)
	fmt.Println("最大ユーザー数:", MaxUsers)
	fmt.Println("有効フラグ:", Enabled)
	fmt.Println("ローカル定数:", LocalConst)

	// 定数に新しい値を代入しようとするとコンパイルエラーになる
	// Pi = 3.14 // Error: cannot assign to Pi (constant 3.14159 of type float64)
	// AppName = "NewApp" // Error: cannot assign to AppName (constant "MyApp" of type string)
}

/* 実行結果:
円周率: 3.14159
アプリ名: MyApp
最大ユーザー数: 1000
有効フラグ: true
ローカル定数: これはローカル定数
*/
```

**コード解説:**

*   `const 定数名 [型] = 値`: これが定数宣言の基本的な形です。
    *   `const`: 定数を宣言することを示します。
    *   `定数名`: 定数を識別するための名前です。Go言語では、公開する定数（他のパッケージから参照されるもの）は大文字で始めるキャメルケース（例: `MaxUsers`）、パッケージ内でのみ使う定数は小文字で始めるキャメルケースが一般的ですが、慣習として大文字始まりが使われることもあります。
    *   `[型]`: 定数の型を指定します（例: `float64`）。変数の場合と同様に、右辺の値から型が明らかな場合は**省略可能**で、コンパイラが型を推論します（例: `AppName`, `MaxUsers`, `Enabled`）。
    *   `= 値`: 定数として設定する値を指定します。この値は**コンパイル時に決定**できる必要があります（数値、文字列、真偽値リテラルや、それら定数から計算できる式など）。

## 定数と変数の違い

| 特徴         | 定数 (`const`)                     | 変数 (`var`, `:=`)                     |
| :----------- | :--------------------------------- | :------------------------------------- |
| **値の変更** | 宣言後に変更**できない**           | 宣言後に変更**できる**                 |
| **宣言場所** | パッケージレベル、関数内           | パッケージレベル、関数内 (`:=`は関数内のみ) |
| **値の決定** | **コンパイル時**に決定される必要がある | 実行時に決定されてもよい               |
| **型**       | 型を持つ（型付き定数）、持たない（型無し定数）場合がある | 必ず型を持つ                         |
| **用途**     | 変わらない値（円周率、設定値など） | 実行中に変化する値（カウンター、状態など） |

**型無し定数 (Untyped Constant):**

`const MaxUsers = 1000` のように型を省略して宣言された定数は「型無し定数」と呼ばれます。型無し定数は、使われる文脈に応じて適切な型に解釈される柔軟性があります。

```go
package main

import "fmt"

const UntypedInt = 100 // 型無し整数定数

func main() {
	var i int = UntypedInt       // int 型の変数に代入できる
	var f float64 = UntypedInt // float64 型の変数にも代入できる (100.0 として扱われる)
	// var b byte = UntypedInt // エラー: 100 は byte (0-255) の範囲内だが、明示的な変換が必要な場合がある

	fmt.Println(i, f)

	const TypedInt int = 200 // 型付き整数定数
	// var f2 float64 = TypedInt // エラー: 型付き定数 TypedInt (int) を float64 に直接代入できない
}
```

定数を使うことで、プログラム中で意味を持つ固定値を名前で表現でき、コードの可読性と保守性を高めることができます。