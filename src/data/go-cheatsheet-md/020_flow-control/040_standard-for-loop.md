---
title: "制御構文: 繰り返し処理 `for` (基本形)"
tags: ["flow-control", "for", "ループ", "繰り返し"]
---

プログラムでは、同じような処理を何度も繰り返したい場面がよくあります。例えば、1から10までの数字を順番に表示したり、リストの各要素に対して同じ操作を行ったりする場合です。このような繰り返し処理を実現するのが**ループ**構文です。

Go言語にはループ構文として **`for`** 文しかありませんが、この `for` 文は非常に柔軟で、他の言語の `for`, `while`, `do-while` に相当する様々な書き方ができます。

ここでは、最も基本的な、他の多くの言語の `for` ループに似た形式を見ていきます。

## `for` ループの基本構文 (3つの部分からなる形式)

この形式の `for` ループは、セミコロン `;` で区切られた3つの部分で構成されます。

`for 初期化ステートメント; 条件式; 後処理ステートメント { ... ループ本体 ... }`

1.  **初期化ステートメント:** ループが開始される**前に一度だけ**実行されます。通常、ループカウンター変数の宣言と初期化に使われます（例: `i := 0`）。ここで宣言された変数は、その `for` ループ内でのみ有効です。
2.  **条件式:** ループの各反復処理が**始まる前**に評価されます。この式の結果が `true` である限り、ループ本体の処理が実行されます。`false` になるとループは終了します。
3.  **後処理ステートメント:** ループ本体の処理が**実行された後**、次の条件式評価の前に毎回実行されます。通常、ループカウンター変数の更新に使われます（例: `i++`）。

```go title="基本的な for ループ"
package main

import "fmt"

func main() {
	fmt.Println("--- 0から4までカウントアップ ---")
	// i を 0 で初期化し、i が 5 より小さい間ループを続け、各反復後に i を 1 増やす
	for i := 0; i < 5; i++ {
		fmt.Println("現在の i:", i)
	}
	// ループ終了後、i はこの場所では使えない (スコープ外)
	// fmt.Println(i) // エラー: undefined: i

	fmt.Println("\n--- 10から1までカウントダウン ---")
	// j を 10 で初期化し、j が 0 より大きい間ループを続け、各反復後に j を 1 減らす
	for j := 10; j > 0; j-- {
		fmt.Println("現在の j:", j)
	}

	fmt.Println("\n--- 2ずつ増加 ---")
	// k を 0 で初期化し、k が 10 以下である間ループを続け、各反復後に k を 2 増やす
	for k := 0; k <= 10; k += 2 { // k = k + 2 と同じ
		fmt.Println("現在の k:", k)
	}
}

/* 実行結果:
--- 0から4までカウントアップ ---
現在の i: 0
現在の i: 1
現在の i: 2
現在の i: 3
現在の i: 4

--- 10から1までカウントダウン ---
現在の j: 10
現在の j: 9
現在の j: 8
現在の j: 7
現在の j: 6
現在の j: 5
現在の j: 4
現在の j: 3
現在の j: 2
現在の j: 1

--- 2ずつ増加 ---
現在の k: 0
現在の k: 2
現在の k: 4
現在の k: 6
現在の k: 8
現在の k: 10
*/
```

**コード解説:**

*   `for i := 0; i < 5; i++ { ... }`:
    *   `i := 0`: ループ開始前に変数 `i` を `0` で初期化します。
    *   `i < 5`: 各反復の開始前に `i` が `5` より小さいかチェックします。`true` ならループ本体を実行、`false` ならループを終了します。
    *   `i++`: ループ本体の処理が終わるたびに `i` の値を `1` 増やします (`i = i + 1` と同じ)。
*   **Goの特徴:**
    *   `if` 文と同様に、`for` 文の3つの部分を囲む丸括弧 `()` は**不要**です。
    *   ループ本体を囲む中括弧 `{}` は**必須**です。
    *   `for` と `{` は同じ行に書く必要があります。

この3つの部分からなる `for` ループは、決まった回数だけ処理を繰り返したい場合に特に便利です。Goの `for` 文には他の書き方もあり、それらは次のセクションで見ていきます。