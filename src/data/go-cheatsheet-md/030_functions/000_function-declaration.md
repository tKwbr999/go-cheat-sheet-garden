---
title: "関数: 処理をまとめる部品"
tags: ["functions", "func", "引数", "パラメータ", "戻り値", "return"]
---

プログラムが大きくなってくると、同じような処理を何度も書いたり、特定の処理をひとまとまりとして扱いたくなったりします。このような場合に使うのが**関数 (Function)** です。

関数は、特定のタスクを実行するための一連の処理をまとめたもので、名前を付けて再利用可能な部品のように扱えます。

## なぜ関数を使うのか？

*   **再利用性:** 同じ処理を何度も書く必要がなくなり、関数を呼び出すだけで済みます。
*   **可読性:** 処理に名前が付くことで、コードが何をしているのか理解しやすくなります。
*   **保守性:** 処理内容を変更したい場合、関数の定義箇所だけを修正すれば、その関数を呼び出しているすべての箇所に修正が反映されます。
*   **モジュール化:** プログラムを小さな機能単位（関数）に分割することで、複雑な問題を管理しやすくなります。

## Goでの関数宣言の基本構文

Go言語では `func` キーワードを使って関数を宣言（定義）します。

**構文:**
```go
func 関数名(引数リスト) 戻り値の型 {
	// 関数の処理内容 (関数本体)
	return 戻り値 // 戻り値がある場合
}
```

*   `func`: 関数を宣言することを示すキーワード。
*   `関数名`: 関数を識別するための名前。Goの命名規則に従います（通常はキャメルケース）。他のパッケージから呼び出せるようにするには大文字で始めます。
*   `引数リスト (パラメータリスト)`: 関数が処理を行うために外部から受け取る値（**引数**）を定義します。`変数名 型` の形式で記述し、複数ある場合はカンマ `,` で区切ります。引数がない場合は `()` の中を空にします。
*   `戻り値の型`: 関数が処理結果として返す値の型を指定します。値を返さない場合は、この部分を省略します。
*   `{ ... }`: 関数の具体的な処理内容（**関数本体**）を記述するブロック。
*   `return 戻り値`: 関数が `戻り値の型` で指定された型の値を返す場合、`return` 文を使ってその値を返します。`return` が実行されると、関数の処理はそこで終了し、呼び出し元に値が返されます。戻り値がない関数の場合は、`return` を省略するか、値を伴わない `return` を書くことで関数を途中で終了できます。

## コード例

```go title="関数の宣言と呼び出し"
package main

import "fmt"

// --- 関数の定義 ---

// 2つの int 型の引数 a と b を受け取り、
// その合計を int 型で返す関数
func add(a int, b int) int {
	sum := a + b
	return sum // 計算結果 sum を返す
}

// string 型の引数 name を受け取り、
// 挨拶メッセージを string 型で返す関数
func greet(name string) string {
	message := "こんにちは、" + name + "さん！"
	return message // 組み立てたメッセージを返す
}

// 引数も戻り値もない関数
// 単に区切り線を表示する
func printSeparator() {
	fmt.Println("--------------------")
	// 戻り値がないので return は不要 (書いても良い: return)
}

// --- 関数の呼び出し (main 関数内) ---
func main() {
	// add 関数を呼び出し、引数として 5 と 3 を渡す
	// 戻り値 (8) を変数 result1 に格納
	result1 := add(5, 3)
	fmt.Printf("add(5, 3) の結果: %d\n", result1)

	// add 関数を再度呼び出し
	result2 := add(10, -2)
	fmt.Printf("add(10, -2) の結果: %d\n", result2)

	// printSeparator 関数を呼び出し (引数なし、戻り値なし)
	printSeparator()

	// greet 関数を呼び出し、引数として "太郎" を渡す
	// 戻り値 ("こんにちは、太郎さん！") を変数 greeting1 に格納
	greeting1 := greet("太郎")
	fmt.Println(greeting1)

	// greet 関数を再度呼び出し
	greeting2 := greet("花子")
	fmt.Println(greeting2)

	printSeparator()
}

/* 実行結果:
add(5, 3) の結果: 8
add(10, -2) の結果: 8
--------------------
こんにちは、太郎さん！
こんにちは、花子さん！
--------------------
*/
```

**コード解説:**

*   `add`, `greet`, `printSeparator` という3つの関数を定義しています。
*   `main` 関数の中で、これらの関数を `関数名(引数)` の形で**呼び出し**ています。
*   `add` や `greet` のように戻り値がある関数は、その戻り値を変数に代入したり、他の式のなかで使ったりできます。
*   `printSeparator` のように戻り値がない関数は、特定の処理を実行させるためだけに呼び出されます。

関数はプログラムを構造化するための基本的な要素です。適切に関数を使うことで、複雑な処理も分かりやすく、管理しやすい形に分割することができます。