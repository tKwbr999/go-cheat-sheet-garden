---
title: "メソッド vs 関数: まとめと比較"
tags: ["methods", "functions", "レシーバ", "比較"]
---

これまでのセクションで、Go言語の**関数 (Function)** と**メソッド (Method)** について学んできました。両者は似ていますが、重要な違いがあります。ここではその違いを簡潔にまとめ、比較します。

## 主な違い

| 特徴           | 関数 (Function)                                  | メソッド (Method)                                       |
| :------------- | :----------------------------------------------- | :------------------------------------------------------ |
| **定義**       | `func 関数名(引数...) ...`                       | `func (レシーバ 型) メソッド名(引数...) ...`            |
| **関連付け**   | 特定の型に**関連付けられない** (独立している)    | 特定の型（レシーバ型）に**関連付けられる**              |
| **レシーバ**   | なし                                             | あり (メソッドが操作する対象のインスタンス)             |
| **呼び出し方** | `パッケージ名.関数名(引数...)` または `関数名(引数...)` | `変数名.メソッド名(引数...)`                            |
| **主な用途**   | 汎用的な処理、ユーティリティ、パッケージレベルの操作 | 特定の型のデータに対する操作、型の振る舞いの定義 (OOP的) |

## コード例による比較: 面積計算

長方形の面積を計算する処理を、関数とメソッドでそれぞれ実装し、呼び出し方を比較します。

```go title="関数とメソッドの比較"
package main

import "fmt"

// --- 型定義 ---
type Rectangle struct {
	Width, Height float64
}

// --- 関数アプローチ ---
// Rectangle を引数として受け取る関数
func CalculateAreaFunc(r Rectangle) float64 {
	return r.Width * r.Height
}

// --- メソッドアプローチ ---
// Rectangle 型に Area メソッドを定義 (値レシーバ)
func (r Rectangle) Area() float64 {
	return r.Width * r.Height
}

func main() {
	rect := Rectangle{Width: 10, Height: 5}
	fmt.Printf("長方形: %+v\n", rect)

	// --- 関数呼び出し ---
	// 関数に Rectangle の値を渡す
	area1 := CalculateAreaFunc(rect)
	fmt.Printf("関数呼び出しの結果 (CalculateAreaFunc(rect)): %.1f\n", area1)

	// --- メソッド呼び出し ---
	// Rectangle の値に対してメソッドを呼び出す
	area2 := rect.Area()
	fmt.Printf("メソッド呼び出しの結果 (rect.Area()): %.1f\n", area2)
}

/* 実行結果:
長方形: {Width:10 Height:5}
関数呼び出しの結果 (CalculateAreaFunc(rect)): 50.0
メソッド呼び出しの結果 (rect.Area()): 50.0
*/
```

**比較のポイント:**

*   **関数 `CalculateAreaFunc`:** `Rectangle` 型の値を引数として受け取ります。呼び出す際は `CalculateAreaFunc(rect)` のように、関数に値を渡します。
*   **メソッド `Area`:** `Rectangle` 型に**関連付け**られています (`func (r Rectangle) ...`)。呼び出す際は `rect.Area()` のように、`Rectangle` 型の変数 `rect` に対してドット `.` を使って呼び出します。メソッド内部ではレシーバ `r` を通して `rect` の値にアクセスします。

## 使い分けのガイドライン

*   **メソッドを使う場合:**
    *   特定の型のデータに対する操作を定義したいとき（例: `Rectangle` の面積計算、`User` のパスワード変更）。
    *   その型の「振る舞い」としてカプセル化したいとき。
    *   オブジェクト指向的な設計を行いたいとき。
    *   インターフェースを実装する必要があるとき（インターフェースはメソッドの集まりを定義するため）。
*   **関数を使う場合:**
    *   特定の型に強く依存しない、より汎用的な処理を行いたいとき（例: 文字列操作ユーティリティ、数学関数）。
    *   複数の異なる型の値を操作する必要があるとき（ただし、インターフェースを使う方法もある）。
    *   パッケージレベルでのヘルパー関数など。

多くの場合、データとそのデータに対する操作は密接に関連しているため、Goでは**メソッドを使うことが推奨される場面が多い**です。特に、自分で定義した構造体に対して操作を行う場合は、メソッドとして定義することを検討しましょう。