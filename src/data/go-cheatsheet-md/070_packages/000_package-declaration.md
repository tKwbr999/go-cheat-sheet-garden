---
title: "パッケージ: コードの構成単位 `package` 宣言"
tags: ["packages", "package", "main"]
---

Go言語のプログラムは、**パッケージ (Package)** という単位で構成・管理されます。パッケージは、関連する機能を持つコード（変数、定数、関数、型など）をまとめたものです。

## `package` 宣言

すべてのGoのソースファイル (`.go` ファイル) は、そのファイルの**先頭**（コメントを除く最初の行）で、自身がどのパッケージに属するかを **`package` キーワード**を使って宣言しなければなりません。

**構文:** `package パッケージ名`

*   `package`: パッケージを宣言するキーワード。
*   `パッケージ名`: このファイルが属するパッケージの名前。Goの命名規則に従います（通常は短く、小文字の単一単語）。

## パッケージの種類

Goのパッケージは大きく分けて2種類あります。

1.  **`main` パッケージ:**
    *   `package main` と宣言されます。
    *   プログラムの**実行を開始**するための特別なパッケージです。
    *   `main` パッケージには、プログラムのエントリーポイントとなる `main` 関数が必ず含まれている必要があります。
    *   コンパイルされると、実行可能なバイナリファイルが生成されます。

2.  **ライブラリパッケージ (非 `main` パッケージ):**
    *   `package main` 以外の名前（例: `package fmt`, `package strings`, `package myutils`）で宣言されます。
    *   再利用可能なコード（関数、型など）を提供することを目的としています。
    *   他のパッケージから `import` して利用されます。
    *   通常、ライブラリパッケージ自体を直接実行することはできません。

## コード例

**実行可能なプログラム (`main` パッケージ):**

```go title="executable.go"
// ファイルの先頭で package main を宣言
package main

// 他のパッケージをインポート
import "fmt"
// import "myutils" // 自作のライブラリパッケージをインポートする場合 (例)

// main 関数 (プログラムのエントリーポイント)
func main() {
	fmt.Println("これは main パッケージです。")
	// message := myutils.GetMessage() // ライブラリパッケージの関数を呼び出す (例)
	// fmt.Println(message)
}

// このファイルを go run executable.go や go build executable.go で実行できる
```

**ライブラリパッケージ (例: `myutils` パッケージ):**

```go title="myutils/utils.go"
// ファイルの先頭でパッケージ名を宣言 (main 以外)
package myutils // このファイルは myutils パッケージに属する

// このパッケージからエクスポート (公開) される関数 (大文字始まり)
func GetMessage() string {
	return "これは myutils パッケージからのメッセージです。"
}

// このパッケージ内部でのみ使われる関数 (小文字始まり)
func internalHelper() {
	// ...
}
```

**ポイント:**

*   すべての `.go` ファイルは、必ず `package` 宣言から始まります。
*   実行可能ファイルを作りたい場合は `package main` とし、`main` 関数を定義します。
*   再利用可能なライブラリを作りたい場合は、`package main` 以外の適切な名前を付けます。
*   **1ディレクトリ = 1パッケージ:** 原則として、同じディレクトリにある `.go` ファイル（テストファイルを除く）は、すべて同じ `package` 宣言を持たなければなりません。

パッケージは、Goのコードを整理し、モジュール化するための基本的な仕組みです。