## タイトル
title: "コードスタイル: 変数 (Variables)"
## タグ
tags: ["references", "code style", "variables", "naming", "var", ":=", "ゼロ値", "エラー変数"]
Goのコードスタイルは、読みやすさと簡潔さを重視します。変数に関する一般的な慣習とスタイルガイドラインは以下の通りです。

## 変数名

*   **キャメルケース (Camel Case):** 複数の単語からなる変数名は、`userCount`, `maxRetries`, `requestBody` のようにキャメルケースを使います。アンダースコア (`_`) は通常使いません。
*   **短く、しかし明確に:** 変数名は、その役割が明確にわかる範囲で、できるだけ短くするのが好まれます。
    *   スコープが狭い（数行程度でしか使われない）場合は、`i`, `j` (ループカウンタ), `r` (Reader), `w` (Writer), `b` (byte スライス), `err` (エラー) のような短い名前が慣習的に使われます。
    *   スコープが広い場合や、より複雑な意味を持つ場合は、`userCount`, `httpClient`, `requestURL` のように、より説明的な名前を使います。
*   **エクスポートされる変数:** パッケージ外に公開される変数（パッケージレベルで宣言され、大文字で始まる）は、その意味が明確にわかる名前を付け、必要であればドキュメンテーションコメントを追加します。
*   **頭字語 (Acronyms):** `userID`, `htmlContent`, `jsonEncoder` のように、頭字語は一貫して大文字または小文字にします（例: `UserID` や `HTMLContent` は良いが、`UserId` や `HtmlContent` は避ける）。ただし、`Id` を `ID` とするかどうかは議論があり、プロジェクトやチームの規約に従うのが一般的です。

## 宣言と初期化

*   **`:=` (短縮変数宣言):** 関数内で変数を宣言し、同時に初期値を代入する場合に最もよく使われます。型は初期値から推論されます。
    ```go
    count := 0
    message := "Hello"
    file, err := os.Open("file.txt")
    ```
*   **`var` 宣言:**
    *   初期値を指定せずに変数を宣言する場合（ゼロ値で初期化される）。
    *   変数の型を明示したい場合。
    *   パッケージレベルで変数を宣言する場合（`:=` は関数内でしか使えない）。
    *   複数の変数をまとめて宣言する場合（グループ化）。
    ```go
    var counter int // ゼロ値 0 で初期化
    var name string // ゼロ値 "" で初期化
    var err error   // ゼロ値 nil で初期化

    var maxWorkers int = 10 // 型と初期値を明示

    // パッケージレベルでのグループ化
    var (
        defaultPort = 8080
        configFile  string
    )
    ```
*   **ゼロ値の活用:** Goでは、宣言された変数は自動的にその型の**ゼロ値**（数値型なら `0`、bool なら `false`、ポインタ・インターフェース・スライス・マップ・チャネルなら `nil`、文字列なら `""`、構造体なら全フィールドがゼロ値）で初期化されます。この性質を利用し、明示的な初期化が不要な場合は `var` 宣言のみを使うことがあります。

## エラー変数

*   エラーを保持する変数の名前は、慣習的に **`err`** が使われます。
*   パッケージレベルで特定のエラー状態を表す変数（センチネルエラー）を定義する場合、**`Err` プレフィックス**を付けるのが一般的です。
    ```go
    var ErrNotFound = errors.New("not found")
    var ErrPermission = errors.New("permission denied")
    ```

## スタイルガイドとツール

*   **Effective Go:** Goの公式スタイルガイドライン。[https://go.dev/doc/effective_go](https://go.dev/doc/effective_go)
*   **`go fmt` / `gofmt`:** コードのインデントやスペースなどを自動的に整形するツール。常に実行するようにしましょう。
*   **`go vet`:** コード中の疑わしい構造（潜在的なバグ）を検出するツール。
*   **Staticcheck などのリンター:** より高度な静的解析を行い、コードスタイルや潜在的な問題を指摘してくれるツール。

一貫性のあるスタイルでコードを書くことは、コードの可読性と保守性を高める上で非常に重要です。Goのコミュニティで広く受け入れられている慣習に従うように心がけましょう。